---
import MobileMenu from "./MobileMenu.astro";
import Header from "./Header.astro";
import Footer from "./Footer.astro";

const { site } = Astro.props;
const isRu = site.locale === "ru";

const menuItems = [
  { label: "Index", href: site.nav.homeHref },
  ...site.nav.links.map((link) => ({ ...link, active: false }))
];

const content = {
  code: isRu ? "ОШИБКА_404" : "ERROR_404",
  title: isRu ? "Сигнал потерян" : "Signal lost",
  subtitle: isRu
    ? "Похоже, эта страница была выведена из ядра маршрутизации."
    : "Looks like this page was ejected from the routing core.",
  cta: isRu ? "Вернуться на главную" : "Return to home",
  hint: isRu ? "Проверьте URL или выберите раздел ниже." : "Check the URL or pick a section below."
};
---

<div class="fixed inset-0 z-0 bg-grid-pattern opacity-100 grid-bg pointer-events-none"></div>
<div class="fixed inset-0 pointer-events-none z-0">
  <div class="absolute top-8 left-8 w-6 h-6 border-l border-t border-[color-mix(in_srgb,var(--color-ochre)_40%,transparent)]"></div>
  <div class="absolute top-8 right-8 w-6 h-6 border-r border-t border-[color-mix(in_srgb,var(--color-ochre)_40%,transparent)]"></div>
  <div class="absolute bottom-8 left-8 w-6 h-6 border-l border-b border-[color-mix(in_srgb,var(--color-ochre)_40%,transparent)]"></div>
  <div class="absolute bottom-8 right-8 w-6 h-6 border-r border-b border-[color-mix(in_srgb,var(--color-ochre)_40%,transparent)]"></div>
  <div class="absolute top-0 left-12 w-[1px] h-full bg-[color-mix(in_srgb,var(--color-ochre)_5%,transparent)] hidden md:block"></div>
  <div class="absolute top-0 right-12 w-[1px] h-full bg-[color-mix(in_srgb,var(--color-ochre)_5%,transparent)] hidden md:block"></div>
</div>

<MobileMenu items={menuItems} locale={site.locale} />
<Header homeHref={site.nav.homeHref} links={site.nav.links} locale={site.locale} />

<main id="main-content" class="relative z-10 min-h-screen flex items-center justify-center px-6 py-24">
  <div class="w-full max-w-3xl border border-[color-mix(in_srgb,var(--color-ochre)_20%,transparent)] bg-surface/30 backdrop-blur-md px-8 py-10 md:px-12 md:py-14">
    <div class="inline-flex items-center gap-3 px-3 py-1 mb-6 border border-[color-mix(in_srgb,var(--color-bronze)_30%,transparent)] bg-[color-mix(in_srgb,var(--color-bronze)_5%,transparent)] text-ochre font-mono text-[10px] tracking-[0.2em] uppercase">
      {content.code}
    </div>
    <h1 class="text-4xl md:text-6xl font-display text-ink mb-4">{content.title}</h1>
    <p class="text-secondary text-lg md:text-xl leading-relaxed mb-6">{content.subtitle}</p>
    <p class="text-muted text-sm md:text-base mb-10">{content.hint}</p>
    <div class="flex flex-wrap items-center gap-4">
      <a
        href={site.nav.homeHref}
        class="font-mono text-[10px] uppercase tracking-[0.2em] px-4 py-3 border border-[color-mix(in_srgb,var(--color-ochre)_30%,transparent)] text-ochre hover:text-cream hover:bg-ochre transition-colors"
      >
        {content.cta}
      </a>
      {site.nav.links.map((link) => (
        <a
          class="font-mono text-[10px] uppercase tracking-[0.2em] text-muted hover:text-ochre transition-colors"
          href={link.href}
        >
          {link.label}
        </a>
      ))}
    </div>
  </div>
</main>

<Footer site={site} />
