@import "tailwindcss";

@layer base {
  :root {
    --font-display: "Space Grotesk", system-ui, -apple-system, "Segoe UI", sans-serif;
    --font-mono: "Space Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;

    --primitive-cream: #fdfcf0;
    --primitive-charcoal: #1c1c1c;
    --primitive-amber: #a85d3d;
    --primitive-amber-bright: #d97706;
    --primitive-green: #16a34a;
    --primitive-green-bright: #22c55e;
    --primitive-red: #dc2626;
    --primitive-red-bright: #ef4444;
    --primitive-yellow: #d97706;
    --primitive-yellow-bright: #f59e0b;
    --primitive-blue: #3b82f6;
    --primitive-blue-bright: #60a5fa;

    --color-bg: var(--primitive-cream);
    --color-cream-bg: var(--primitive-cream);
    --color-cream: var(--primitive-cream);
    --color-ink: var(--primitive-charcoal);
    --color-charcoal: var(--primitive-charcoal);
    --color-technical-grey: var(--primitive-charcoal);
    --color-contrast: var(--primitive-charcoal);
    --color-primary: var(--primitive-amber);
    --color-bronze: var(--primitive-amber);
    --color-warm-amber: var(--primitive-amber);
    --color-ochre: var(--primitive-amber);
    --color-surface: rgba(255, 255, 255, 0.6);
    --color-surface-light: var(--color-surface);

    --color-success: var(--primitive-green);
    --color-warning: var(--primitive-yellow);
    --color-error: var(--primitive-red);
    --color-info: var(--primitive-blue);
    --color-status-online: var(--primitive-green);

    --opacity-text-strong: 0.85;
    --opacity-text-secondary: 0.7;
    --opacity-text-muted: 0.55;
    --opacity-text-disabled: 0.4;
    --opacity-bg-subtle: 0.05;
    --opacity-bg-soft: 0.1;
    --opacity-bg-medium: 0.2;
    --opacity-bg-strong: 0.3;
    --opacity-decor-strong: 0.4;

    --color-terminal-bg: color-mix(in srgb, var(--color-ink) 30%, transparent);
    --color-terminal-border: color-mix(in srgb, var(--color-ink) 10%, transparent);
    --color-terminal-text: color-mix(in srgb, var(--color-ink) 85%, transparent);
    --color-terminal-prompt: #16a34a;
    --color-terminal-success: var(--color-success);
    --color-terminal-warning: var(--color-warning);
    --color-terminal-error: var(--color-error);
    --color-terminal-info: var(--color-info);
    --color-terminal-cursor: rgba(28, 28, 28, 0.7);

    --grid-color: rgba(168, 93, 61, 0.08);
    --grid-color-menu: rgba(0, 0, 0, 0.05);
    --scrollbar-thumb: var(--color-primary);
    --scrollbar-track: var(--color-bg);

    --text-stroke-color: var(--color-primary);
    --text-stroke-hover: var(--color-primary);
    --glow-color: rgba(168, 93, 61, 0.2);

    --card-border: color-mix(in srgb, var(--color-primary) 20%, transparent);
    --card-bg: var(--color-surface);
    --card-shadow: 0 10px 30px color-mix(in srgb, var(--color-primary) 5%, transparent);
    --card-blur: 12px;
    --card-corner-color: var(--color-primary);
    --card-corner-shadow-before: none;
    --card-corner-shadow-after: none;

    --color-border-soft: color-mix(in srgb, var(--color-primary) 10%, transparent);
    --color-border-softer: color-mix(in srgb, var(--color-primary) 5%, transparent);
    --color-border-strong: color-mix(in srgb, var(--color-primary) 20%, transparent);
    --color-badge-bg: color-mix(in srgb, var(--color-bg) 30%, transparent);

    --scanline: rgba(0, 0, 0, 0.05);
    --corner-frame-color: var(--color-primary);
    --code-blur-amount: 0.4px;
    --code-blur-opacity: 0.15;
  }

  html.dark {
    --color-background-dark: #221c10;
    --color-surface-dark: #0f0e0d;
    --color-bg: #221c10;
    --color-surface: #0f0e0d;
    --color-ink: #fafaf9;
    --color-charcoal: #fafaf9;
    --color-technical-grey: #292524;
    --color-contrast: #fdfcf0;
    --color-primary: var(--primitive-amber-bright);
    --color-warm-amber: var(--primitive-amber-bright);
    --color-ochre: var(--primitive-amber-bright);
    --color-bronze: var(--primitive-amber-bright);
    --color-cream-bg: var(--primitive-cream);
    --color-cream: var(--primitive-cream);
    --color-success: var(--primitive-green-bright);
    --color-warning: var(--primitive-yellow-bright);
    --color-error: var(--primitive-red-bright);
    --color-info: var(--primitive-blue-bright);
    --color-status-online: var(--primitive-green-bright);
    --color-terminal-bg: color-mix(in srgb, #000 30%, transparent);
    --color-terminal-border: color-mix(in srgb, var(--color-ink) 10%, transparent);
    --color-terminal-text: color-mix(in srgb, var(--color-ink) 85%, transparent);
    --color-terminal-prompt: var(--color-success);
    --color-terminal-success: var(--color-success);
    --color-terminal-warning: var(--color-warning);
    --color-terminal-error: var(--color-error);
    --color-terminal-info: var(--color-info);
    --color-terminal-cursor: rgba(250, 250, 249, 0.7);

    --grid-color: rgba(255, 255, 255, 0.03);

    --scrollbar-thumb: var(--color-primary);
    --scrollbar-track: #0c0a09;

    --text-stroke-color: currentColor;
    --text-stroke-hover: var(--color-primary);
    --glow-color: rgba(217, 119, 6, 0.3);

    --card-border: color-mix(in srgb, var(--color-primary) 20%, transparent);
    --card-bg: rgba(12, 10, 9, 0.6);
    --card-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
    --card-blur: 8px;
    --card-corner-color: var(--color-primary);
    --card-corner-shadow-before: -1px -1px 8px rgba(217, 119, 6, 0.5);
    --card-corner-shadow-after: 1px 1px 8px rgba(217, 119, 6, 0.5);

    --color-border-soft: color-mix(in srgb, var(--color-ink) 10%, transparent);
    --color-border-softer: color-mix(in srgb, var(--color-ink) 5%, transparent);
    --color-border-strong: color-mix(in srgb, var(--color-ink) 20%, transparent);
    --color-badge-bg: color-mix(in srgb, var(--color-ochre) 5%, transparent);

    --scanline: rgba(255, 255, 255, 0.04);
    --corner-frame-color: #d97706;
    --code-blur-amount: 0.5px;
    --code-blur-opacity: 0.4;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: var(--font-display);
    color: var(--color-ink);
    background: var(--color-bg);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  *:focus-visible {
    outline: 2px solid var(--color-ochre);
    outline-offset: 2px;
  }

  ::selection {
    background: color-mix(in oklab, var(--color-warm-amber) 30%, transparent);
    color: var(--color-warm-amber);
  }

  html {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
  }

  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb);
    border-radius: 4px;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 border px-4 py-2 text-xs uppercase tracking-[0.24em] transition-all;
    border-color: color-mix(in oklab, var(--color-charcoal) 10%, transparent);
    background: var(--color-surface-light);
    color: var(--color-ink);
  }

  .btn-primary {
    background: color-mix(in oklab, var(--color-warm-amber) 20%, transparent);
    border-color: color-mix(in oklab, var(--color-warm-amber) 30%, transparent);
    color: var(--color-warm-amber);
  }

  .btn-primary:hover {
    background: color-mix(in oklab, var(--color-warm-amber) 30%, transparent);
    box-shadow: 0 0 18px var(--glow-color);
  }

  .btn-ghost {
    background: transparent;
    border-color: color-mix(in oklab, var(--color-ink) 10%, transparent);
    color: color-mix(in oklab, var(--color-ink) 55%, transparent);
  }

  .terminal-card {
    position: relative;
    border: 1px solid var(--card-border);
    background: var(--card-bg);
    backdrop-filter: blur(var(--card-blur));
    box-shadow: var(--card-shadow);
  }

  .terminal-card::before,
  .terminal-card::after {
    content: "";
    position: absolute;
    width: 10px;
    height: 10px;
    border-color: var(--card-corner-color);
  }

  .terminal-card::before {
    top: -1px;
    left: -1px;
    border-top: 2px solid;
    border-left: 2px solid;
    box-shadow: var(--card-corner-shadow-before);
  }

  .terminal-card::after {
    bottom: -1px;
    right: -1px;
    border-bottom: 2px solid;
    border-right: 2px solid;
    box-shadow: var(--card-corner-shadow-after);
  }

  .technical-card {
    position: relative;
    border: 1px solid var(--card-border);
    background: var(--card-bg);
    backdrop-filter: blur(var(--card-blur));
    box-shadow: var(--card-shadow);
  }

  .technical-card::before {
    content: "";
    position: absolute;
    top: -1px;
    left: -1px;
    width: 8px;
    height: 8px;
    border-top: 2px solid var(--card-corner-color);
    border-left: 2px solid var(--card-corner-color);
    box-shadow: var(--card-corner-shadow-before);
  }

  .technical-card::after {
    content: "";
    position: absolute;
    bottom: -1px;
    right: -1px;
    width: 8px;
    height: 8px;
    border-bottom: 2px solid var(--card-corner-color);
    border-right: 2px solid var(--card-corner-color);
    box-shadow: var(--card-corner-shadow-after);
  }

  .chip {
    @apply border px-3 py-1 text-[10px] uppercase tracking-[0.24em];
    border-color: color-mix(in oklab, var(--color-ink) 20%, transparent);
    color: color-mix(in oklab, var(--color-ink) 55%, transparent);
    background: color-mix(in oklab, var(--color-cream-bg) 30%, transparent);
  }


  .page-transition {
    opacity: 0;
    pointer-events: none;
    transition: opacity 320ms ease;
  }

  .page-transition.is-active {
    opacity: 1;
    pointer-events: auto;
  }
}

@layer utilities {
  .theme-dark {
    display: block;
  }

  .theme-light {
    display: block;
  }
  .mono {
    font-family: var(--font-mono);
  }

  .grid-bg {
    background-image: linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
      linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
    background-size: 40px 40px;
  }

  .bg-grid-pattern {
    background-image: linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
      linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
  }

  .menu-grid-bg {
    background-size: 40px 40px;
    background-image: linear-gradient(to right, var(--grid-color-menu) 1px, transparent 1px),
      linear-gradient(to bottom, var(--grid-color-menu) 1px, transparent 1px);
  }

  .text-ink {
    color: var(--color-ink);
  }

  .text-strong {
    color: color-mix(
      in srgb,
      var(--color-ink) calc(var(--opacity-text-strong) * 100%),
      transparent
    );
  }

  .text-secondary {
    color: color-mix(
      in srgb,
      var(--color-ink) calc(var(--opacity-text-secondary) * 100%),
      transparent
    );
  }

  .text-muted {
    color: color-mix(
      in srgb,
      var(--color-ink) calc(var(--opacity-text-muted) * 100%),
      transparent
    );
  }

  .text-disabled {
    color: color-mix(
      in srgb,
      var(--color-ink) calc(var(--opacity-text-disabled) * 100%),
      transparent
    );
  }

  .border-soft {
    border-color: var(--color-border-soft);
  }

  .border-softer {
    border-color: var(--color-border-softer);
  }

  .border-strong {
    border-color: var(--color-border-strong);
  }

  .bg-soft {
    background-color: color-mix(in srgb, var(--color-ink) 5%, transparent);
  }

  .bg-softer {
    background-color: color-mix(in srgb, var(--color-ink) 5%, transparent);
  }

  .bg-badge {
    background-color: var(--color-badge-bg);
  }

  .bg-terminal {
    background-color: var(--color-terminal-bg);
  }

  .border-terminal {
    border-color: var(--color-terminal-border);
  }

  .text-terminal-text {
    color: var(--color-terminal-text);
  }

  .text-terminal-prompt {
    color: var(--color-terminal-prompt);
  }

  .text-terminal-success {
    color: var(--color-terminal-success);
  }

  .text-terminal-warning {
    color: var(--color-terminal-warning);
  }

  .text-terminal-error {
    color: var(--color-terminal-error);
  }

  .text-terminal-info {
    color: var(--color-terminal-info);
  }

  .text-status-online {
    color: var(--color-status-online);
  }

  .bg-status-online {
    background-color: var(--color-status-online);
  }

  .text-ochre {
    color: var(--color-ochre);
  }

  .text-bronze {
    color: var(--color-bronze);
  }

  .text-cream {
    color: var(--color-cream);
  }

  .text-cream-bg {
    color: var(--color-cream-bg);
  }

  .text-contrast {
    color: var(--color-contrast);
  }

  .hover-text-contrast:hover {
    color: var(--color-contrast);
  }

  .text-charcoal {
    color: var(--color-charcoal);
  }

  .text-warm-amber {
    color: var(--color-warm-amber);
  }

  .text-amber-accent {
    color: var(--color-warm-amber);
  }

  .bg-amber-accent {
    background-color: var(--color-warm-amber);
  }

  .bg-warm-amber {
    background-color: var(--color-warm-amber);
  }

  .border-warm-amber {
    border-color: var(--color-warm-amber);
  }


  .bg-cream-bg {
    background-color: var(--color-cream-bg);
  }

  .bg-cream {
    background-color: var(--color-cream);
  }

  .text-warm-bg {
    color: var(--color-cream-bg);
  }


  .bg-bronze {
    background-color: var(--color-bronze);
  }


  .bg-charcoal {
    background-color: var(--color-charcoal);
  }


  .bg-charcoal-faint {
    background-color: color-mix(in srgb, var(--color-charcoal) 5%, transparent);
  }


  .border-bronze {
    border-color: var(--color-bronze);
  }


  .bg-ochre {
    background-color: var(--color-ochre);
  }


  .border-ochre {
    border-color: var(--color-ochre);
  }


  .bg-background-dark\/40 {
    background-color: color-mix(in srgb, var(--color-bg) 40%, transparent);
  }

  .bg-background-dark {
    background-color: var(--color-bg);
  }

  .bg-surface-dark\/30 {
    background-color: color-mix(
      in srgb,
      var(--color-surface-dark, var(--color-surface-light)) 30%,
      transparent
    );
  }

  .bg-surface-dark {
    background-color: var(--color-surface-dark, var(--color-charcoal));
  }

  .bg-surface {
    background-color: var(--color-surface);
  }

  .bg-surface\/30 {
    background-color: color-mix(in srgb, var(--color-surface) 30%, transparent);
  }

  .scanline {
    background-image: linear-gradient(to bottom, var(--scanline) 1px, transparent 1px);
    background-size: 100% 6px;
  }

  .text-stroke {
    -webkit-text-stroke: 1px var(--text-stroke-color);
    color: transparent;
  }

  .text-stroke:hover {
    color: var(--text-stroke-hover);
    -webkit-text-stroke: 0px transparent;
  }

  .menu-link-stroke {
    -webkit-text-stroke: 1px var(--color-charcoal);
    color: transparent;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .menu-link-stroke:hover,
  .menu-link-stroke.active {
    color: var(--color-warm-amber);
    -webkit-text-stroke: 1px var(--color-warm-amber);
  }

  .glow {
    text-shadow: 0 0 18px var(--glow-color);
  }

  .glowing-text {
    text-shadow: 0 0 10px var(--glow-color);
  }

  .glow-text {
    text-shadow: 0 0 25px var(--glow-color);
  }

  .glow-amber {
    text-shadow: 0 0 30px var(--glow-color);
  }

  .code-blur {
    filter: blur(var(--code-blur-amount));
    opacity: var(--code-blur-opacity);
  }

  .cursor-blink {
    color: var(--color-terminal-cursor);
    animation: blink 1s step-end infinite;
  }

  .vertical-text {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    transform: rotate(180deg);
  }

  .moose-glow {
    animation: moose-pulse 4s infinite ease-in-out;
  }

  .typing-effect {
    display: inline;
    white-space: pre-wrap;
  }

  .typing-cursor {
    display: inline-block;
    margin-left: 2px;
    animation: blink-caret 0.9s step-end infinite;
  }

  .terminal-bubble {
    display: none;
    position: absolute;
    left: 100%;
    top: 0;
    margin-left: 20px;
    width: 250px;
    background: color-mix(in srgb, var(--color-bg) 30%, transparent);
    border: 1px solid var(--color-ochre);
    padding: 12px;
    z-index: 50;
    box-shadow: 0 0 15px var(--glow-color);
  }

  .theme-toggle {
    border-radius: var(--radius-sm);
    transition: all 300ms ease;
  }

  .theme-toggle:hover {
    background-color: var(--color-bronze);
    color: var(--color-cream-bg);
  }

  .terminal-bubble::before {
    content: "";
    position: absolute;
    left: -6px;
    top: 28px;
    width: 10px;
    height: 10px;
    background: color-mix(in srgb, var(--color-bg) 30%, transparent);
    border-left: 1px solid var(--color-ochre);
    border-bottom: 1px solid var(--color-ochre);
    transform: rotate(45deg);
  }

  .group:hover .terminal-bubble {
    display: block;
    animation: fadeIn 0.3s ease-out;
  }

  .corner-frame {
    position: absolute;
    inset: 24px;
    pointer-events: none;
  }

  .corner-frame::before,
  .corner-frame::after {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    border-color: color-mix(in oklab, var(--corner-frame-color) 30%, transparent);
  }

  .corner-frame::before {
    top: 0;
    left: 0;
    border-left: 1px solid;
    border-top: 1px solid;
  }

  .corner-frame::after {
    bottom: 0;
    right: 0;
    border-right: 1px solid;
    border-bottom: 1px solid;
  }

  .section-pad {
    @apply px-6 py-16 sm:px-10 sm:py-20;
  }

  .max-wrap {
    @apply mx-auto w-full max-w-[1200px];
  }

  .reveal {
    @apply translate-y-6 opacity-0 transition-all duration-700 ease-out;
  }

  .reveal.is-visible {
    @apply translate-y-0 opacity-100;
  }
}

html.dark .theme-light {
  display: none;
}

html:not(.dark) .theme-dark {
  display: none;
}

html.dark .theme-toggle {
  border-color: color-mix(in oklab, var(--color-ink) 20%, transparent);
  background-color: color-mix(in oklab, var(--color-surface-dark) 20%, transparent);
  color: color-mix(in oklab, var(--color-ink) 55%, transparent);
}

html.dark .theme-toggle:hover {
  border-color: var(--color-ochre);
  background-color: color-mix(in oklab, var(--color-ochre) 20%, transparent);
  color: var(--color-ochre);
  box-shadow: 0 0 10px var(--glow-color);
}

.cta-button {
  color: var(--color-cream);
}

.cta-button:hover {
  color: var(--color-contrast);
  background-color: color-mix(in oklab, var(--color-ochre) 70%, var(--color-cream-bg));
}

html.dark .cta-button {
  color: var(--color-contrast);
}

html.dark .cta-button:hover {
  background-color: color-mix(in oklab, var(--color-ochre) 75%, var(--color-surface-dark));
}

@keyframes blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

@keyframes moose-pulse {
  0%,
  100% {
    stroke: color-mix(in srgb, var(--color-ochre) 30%, transparent);
    filter: drop-shadow(0 0 2px color-mix(in srgb, var(--color-ochre) 10%, transparent));
  }
  50% {
    stroke: var(--color-ochre);
    filter: drop-shadow(0 0 5px color-mix(in srgb, var(--color-ochre) 55%, transparent));
  }
}

@keyframes blink-caret {
  from,
  to {
    border-color: transparent;
  }
  50% {
    border-color: var(--color-ochre);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
